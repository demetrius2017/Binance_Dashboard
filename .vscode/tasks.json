{
	"version": "2.0.0",
	"tasks": [
		{
			"label": "Run Copilot MCP (background)",
			"type": "shell",
			"command": "${workspaceFolder}/venv/bin/python",
			"args": [
				"-m",
				"copilot.main",
				"--symbol",
				"BTCUSDT",
				"--enable-mcp",
				"--min-labeled",
				"30"
			],
			"isBackground": true,
			"group": "build"
		},
		{
			"label": "Students Live Eval (one-shot)",
			"type": "shell",
			"command": "${workspaceFolder}/venv/bin/python",
			"args": [
				"-m",
				"copilot.tools.students_live_eval",
				"--model",
				"copilot/experiments/tardis/models/student_mlp_1755591256.json",
				"--symbol",
				"SOLUSDT",
				"--state-file",
				"copilot/state/runtime_state.json"
			]
		},
		{
			"label": "Students Eval on Professor Dataset (MLP)",
			"type": "shell",
			"command": "${workspaceFolder}/venv/bin/python",
			"args": [
				"-m",
				"copilot.tools.students_eval_on_dataset",
				"--datasets",
				"copilot/experiments/tardis/datasets/ds_SOLUSDT_last1_cli.parquet",
				"--model",
				"copilot/experiments/tardis/models/student_mlp_1755591256.json",
				"--report",
				"copilot/experiments/tardis/reports/students_eval_mlp_$(date +%s).json"
			]
		},
		{
			"label": "Students Replay Eval (align pivots)",
			"type": "shell",
			"command": "${workspaceFolder}/venv/bin/python",
			"args": [
				"-m",
				"copilot.tools.students_replay_eval",
				"--exchange",
				"binance-futures",
				"--symbol",
				"SOLUSDT",
				"--channels",
				"bookTicker",
				"--from",
				"2025-08-18T00:00:00Z",
				"--to",
				"2025-08-18T23:59:59Z",
				"--model",
				"copilot/experiments/tardis/models/student_mlp_1755591256.json",
				"--align-pivots",
				"copilot/experiments/tardis/datasets/ds_SOLUSDT_last1_cli.parquet",
				"--report",
				"copilot/experiments/tardis/reports/students_replay_eval_SOLUSDT_$(date +%s).json"
			]
		},
		{
			"label": "Get dataset ts range",
			"type": "shell",
			"command": "${workspaceFolder}/venv/bin/python",
			"args": [
				"-c",
				"import pyarrow.parquet as pq, pandas as pd, datetime as dt, json, sys; p='copilot/experiments/tardis/datasets/ds_SOLUSDT_last1_cli.parquet'; t=pq.read_table(p, columns=['ts']).combine_chunks(); import numpy as np; arr=np.array(t.column(0).to_pylist(), dtype=float); mn=float(np.nanmin(arr)); mx=float(np.nanmax(arr)); iso=lambda x: dt.datetime.utcfromtimestamp(x).strftime('%Y-%m-%dT%H:%M:%SZ'); print(json.dumps({'from': iso(mn), 'to': iso(mx)}))"
			]
		},
		{
			"label": "Get dataset ts range (fixed)",
			"type": "shell",
			"command": "${workspaceFolder}/venv/bin/python",
			"args": [
				"-c",
				"import pyarrow.parquet as pq, datetime as dt, json; p=\"copilot/experiments/tardis/datasets/ds_SOLUSDT_last1_cli.parquet\"; t=pq.read_table(p, columns=[\"ts\"]).combine_chunks(); arr=[float(v) for v in t.column(0).to_pylist() if v is not None]; mn=min(arr); mx=max(arr); iso=lambda x: dt.datetime.utcfromtimestamp(x).strftime(\"%Y-%m-%dT%H:%M:%SZ\"); print(json.dumps({\"from\": iso(mn), \"to\": iso(mx)}))"
			]
		},
		{
			"label": "Train GRU on seq L64",
			"type": "shell",
			"command": "${workspaceFolder}/venv/bin/python",
			"args": [
				"-m",
				"copilot.tools.students_seq_train",
				"--datasets",
				"copilot/experiments/tardis/datasets/seq_SOLUSDT_aggregate_thr25_L64_s5.parquet",
				"--epochs",
				"25",
				"--batch",
				"64",
				"--hidden",
				"32",
				"--lr",
				"0.001",
				"--split-ratio",
				"0.8",
				"--patience",
				"5",
				"--report",
				"copilot/experiments/tardis/reports/students_seq_report_L64.json"
			]
		},
		{
			"label": "Train GRU on seq L128 (background)",
			"type": "shell",
			"command": "${workspaceFolder}/venv/bin/python",
			"args": [
				"-m",
				"copilot.tools.students_seq_train",
				"--datasets",
				"copilot/experiments/tardis/datasets/seq_SOLUSDT_aggregate_thr25_L128_s10.parquet",
				"--epochs",
				"25",
				"--batch",
				"64",
				"--hidden",
				"32",
				"--lr",
				"0.001",
				"--split-ratio",
				"0.8",
				"--patience",
				"5",
				"--report",
				"copilot/experiments/tardis/reports/students_seq_report_L128.json"
			],
			"isBackground": true
		},
		{
			"label": "Eval GRU L64 on dataset",
			"type": "shell",
			"command": "${workspaceFolder}/venv/bin/python",
			"args": [
				"-m",
				"copilot.tools.students_seq_eval",
				"--datasets",
				"copilot/experiments/tardis/datasets/seq_SOLUSDT_aggregate_thr25_L64_s5.parquet",
				"--model",
				"copilot/experiments/tardis/models/student_seq_gru_1758009443.json",
				"--report",
				"copilot/experiments/tardis/reports/students_seq_eval_report_L64.json",
				"--scores-out",
				"copilot/experiments/tardis/reports/students_seq_scores_L64.parquet"
			]
		},
		{
			"label": "Replay Eval GRU L64 on pivots (offline)",
			"type": "shell",
			"command": "${workspaceFolder}/venv/bin/python",
			"args": [
				"-m",
				"copilot.tools.students_seq_replay_eval",
				"--pivots",
				"copilot/experiments/tardis/datasets/pivots_SOLUSDT_aggregate_thr25_ext.parquet",
				"--cache-dir",
				"copilot/experiments/tardis/cache/jsonl",
				"--exchange",
				"binance-futures",
				"--symbol",
				"SOLUSDT",
				"--model",
				"copilot/experiments/tardis/models/student_seq_gru_1758009443.json",
				"--seq-len",
				"64",
				"--step-every",
				"5",
				"--report",
				"copilot/experiments/tardis/reports/students_seq_replay_eval_L64.json",
				"--scores-out",
				"copilot/experiments/tardis/reports/students_seq_replay_scores_L64.parquet"
			]
		},
		{
			"label": "Replay Eval GRU L64 on pivots (offline) — retry",
			"type": "shell",
			"command": "${workspaceFolder}/venv/bin/python",
			"args": [
				"-m",
				"copilot.tools.students_seq_replay_eval",
				"--pivots",
				"copilot/experiments/tardis/datasets/pivots_SOLUSDT_aggregate_thr25_ext.parquet",
				"--cache-dir",
				"copilot/experiments/tardis/cache/jsonl",
				"--exchange",
				"binance-futures",
				"--symbol",
				"SOLUSDT",
				"--model",
				"copilot/experiments/tardis/models/student_seq_gru_1758009443.json",
				"--seq-len",
				"64",
				"--step-every",
				"5",
				"--report",
				"copilot/experiments/tardis/reports/students_seq_replay_eval_L64.json",
				"--scores-out",
				"copilot/experiments/tardis/reports/students_seq_replay_scores_L64.parquet"
			]
		},
		{
			"label": "Eval GRU L128 on dataset",
			"type": "shell",
			"command": "${workspaceFolder}/venv/bin/python",
			"args": [
				"-m",
				"copilot.tools.students_seq_eval",
				"--datasets",
				"copilot/experiments/tardis/datasets/seq_SOLUSDT_aggregate_thr25_L128_s10.parquet",
				"--model",
				"copilot/experiments/tardis/models/student_seq_gru_1758009741.json",
				"--report",
				"copilot/experiments/tardis/reports/students_seq_eval_report_L128.json",
				"--scores-out",
				"copilot/experiments/tardis/reports/students_seq_scores_L128.parquet"
			]
		},
		{
			"label": "Replay Eval GRU L64 limited",
			"type": "shell",
			"command": "${workspaceFolder}/venv/bin/python",
			"args": [
				"-m",
				"copilot.tools.students_seq_replay_eval",
				"--pivots",
				"copilot/experiments/tardis/datasets/pivots_SOLUSDT_aggregate_thr25_ext.parquet",
				"--cache-dir",
				"copilot/experiments/tardis/cache/jsonl",
				"--exchange",
				"binance-futures",
				"--symbol",
				"SOLUSDT",
				"--model",
				"copilot/experiments/tardis/models/student_seq_gru_1758009443.json",
				"--seq-len",
				"64",
				"--step-every",
				"5",
				"--limit",
				"200",
				"--report",
				"copilot/experiments/tardis/reports/students_seq_replay_eval_L64_limit200.json"
			]
		},
		{
			"label": "Replay Eval GRU L64 limit100",
			"type": "shell",
			"command": "${workspaceFolder}/venv/bin/python",
			"args": [
				"-m",
				"copilot.tools.students_seq_replay_eval",
				"--pivots",
				"copilot/experiments/tardis/datasets/pivots_SOLUSDT_aggregate_thr25_ext.parquet",
				"--cache-dir",
				"copilot/experiments/tardis/cache/jsonl",
				"--exchange",
				"binance-futures",
				"--symbol",
				"SOLUSDT",
				"--model",
				"copilot/experiments/tardis/models/student_seq_gru_1758009443.json",
				"--seq-len",
				"64",
				"--step-every",
				"5",
				"--limit",
				"100",
				"--report",
				"copilot/experiments/tardis/reports/students_seq_replay_eval_L64_limit100.json"
			]
		},
		{
			"label": "Replay Eval GRU L64 limit20",
			"type": "shell",
			"command": "${workspaceFolder}/venv/bin/python",
			"args": [
				"-m",
				"copilot.tools.students_seq_replay_eval",
				"--pivots",
				"copilot/experiments/tardis/datasets/pivots_SOLUSDT_aggregate_thr25_ext.parquet",
				"--cache-dir",
				"copilot/experiments/tardis/cache/jsonl",
				"--exchange",
				"binance-futures",
				"--symbol",
				"SOLUSDT",
				"--model",
				"copilot/experiments/tardis/models/student_seq_gru_1758009443.json",
				"--seq-len",
				"64",
				"--step-every",
				"5",
				"--limit",
				"20",
				"--report",
				"copilot/experiments/tardis/reports/students_seq_replay_eval_L64_limit20.json"
			]
		},
		{
			"label": "Replay Eval GRU L128 limit20",
			"type": "shell",
			"command": "${workspaceFolder}/venv/bin/python",
			"args": [
				"-m",
				"copilot.tools.students_seq_replay_eval",
				"--pivots",
				"copilot/experiments/tardis/datasets/pivots_SOLUSDT_aggregate_thr25_ext.parquet",
				"--cache-dir",
				"copilot/experiments/tardis/cache/jsonl",
				"--exchange",
				"binance-futures",
				"--symbol",
				"SOLUSDT",
				"--model",
				"copilot/experiments/tardis/models/student_seq_gru_1758009741.json",
				"--seq-len",
				"128",
				"--step-every",
				"10",
				"--limit",
				"20",
				"--report",
				"copilot/experiments/tardis/reports/students_seq_replay_eval_L128_limit20.json"
			]
		},
		{
			"label": "Replay Eval GRU L64 limit100 (progress)",
			"type": "shell",
			"command": "${workspaceFolder}/venv/bin/python",
			"args": [
				"-m",
				"copilot.tools.students_seq_replay_eval",
				"--pivots",
				"copilot/experiments/tardis/datasets/pivots_SOLUSDT_aggregate_thr25_ext.parquet",
				"--cache-dir",
				"copilot/experiments/tardis/cache/jsonl",
				"--exchange",
				"binance-futures",
				"--symbol",
				"SOLUSDT",
				"--model",
				"copilot/experiments/tardis/models/student_seq_gru_1758009443.json",
				"--seq-len",
				"64",
				"--step-every",
				"5",
				"--limit",
				"100",
				"--progress-every",
				"25",
				"--report",
				"copilot/experiments/tardis/reports/students_seq_replay_eval_L64_limit100.json"
			]
		},
		{
			"label": "Replay Eval GRU L128 limit20 (progress)",
			"type": "shell",
			"command": "${workspaceFolder}/venv/bin/python",
			"args": [
				"-m",
				"copilot.tools.students_seq_replay_eval",
				"--pivots",
				"copilot/experiments/tardis/datasets/pivots_SOLUSDT_aggregate_thr25_ext.parquet",
				"--cache-dir",
				"copilot/experiments/tardis/cache/jsonl",
				"--exchange",
				"binance-futures",
				"--symbol",
				"SOLUSDT",
				"--model",
				"copilot/experiments/tardis/models/student_seq_gru_1758009741.json",
				"--seq-len",
				"128",
				"--step-every",
				"10",
				"--limit",
				"20",
				"--progress-every",
				"10",
				"--report",
				"copilot/experiments/tardis/reports/students_seq_replay_eval_L128_limit20.json"
			]
		},
		{
			"label": "Replay Eval GRU L64 limit100 (progress)",
			"type": "shell",
			"command": "${workspaceFolder}/venv/bin/python",
			"args": [
				"-m",
				"copilot.tools.students_seq_replay_eval",
				"--pivots",
				"copilot/experiments/tardis/datasets/pivots_SOLUSDT_aggregate_thr25_ext.parquet",
				"--cache-dir",
				"copilot/experiments/tardis/cache/jsonl",
				"--exchange",
				"binance-futures",
				"--symbol",
				"SOLUSDT",
				"--model",
				"copilot/experiments/tardis/models/student_seq_gru_1758009443.json",
				"--seq-len",
				"64",
				"--step-every",
				"5",
				"--limit",
				"100",
				"--progress-every",
				"25",
				"--report",
				"copilot/experiments/tardis/reports/students_seq_replay_eval_L64_limit100.json"
			]
		},
		{
			"label": "Replay Eval GRU L128 limit100 (progress)",
			"type": "shell",
			"command": "${workspaceFolder}/venv/bin/python",
			"args": [
				"-m",
				"copilot.tools.students_seq_replay_eval",
				"--pivots",
				"copilot/experiments/tardis/datasets/pivots_SOLUSDT_aggregate_thr25_ext.parquet",
				"--cache-dir",
				"copilot/experiments/tardis/cache/jsonl",
				"--exchange",
				"binance-futures",
				"--symbol",
				"SOLUSDT",
				"--model",
				"copilot/experiments/tardis/models/student_seq_gru_1758009741.json",
				"--seq-len",
				"128",
				"--step-every",
				"10",
				"--limit",
				"100",
				"--progress-every",
				"25",
				"--report",
				"copilot/experiments/tardis/reports/students_seq_replay_eval_L128_limit100.json"
			]
		},
		{
			"label": "Replay Eval GRU L128 limit300 (progress)",
			"type": "shell",
			"command": "${workspaceFolder}/venv/bin/python",
			"args": [
				"-m",
				"copilot.tools.students_seq_replay_eval",
				"--pivots",
				"copilot/experiments/tardis/datasets/pivots_SOLUSDT_aggregate_thr25_ext.parquet",
				"--cache-dir",
				"copilot/experiments/tardis/cache/jsonl",
				"--exchange",
				"binance-futures",
				"--symbol",
				"SOLUSDT",
				"--model",
				"copilot/experiments/tardis/models/student_seq_gru_1758009741.json",
				"--seq-len",
				"128",
				"--step-every",
				"10",
				"--limit",
				"300",
				"--progress-every",
				"50",
				"--report",
				"copilot/experiments/tardis/reports/students_seq_replay_eval_L128_limit300.json"
			]
		},
		{
			"label": "Replay Eval MLP align-pivots (same pivots)",
			"type": "shell",
			"command": "${workspaceFolder}/venv/bin/python",
			"args": [
				"-m",
				"copilot.tools.students_replay_eval",
				"--exchange",
				"binance-futures",
				"--symbol",
				"SOLUSDT",
				"--from",
				"2025-08-17T19:00:00Z",
				"--to",
				"2025-08-17T22:50:54Z",
				"--model",
				"copilot/experiments/tardis/models/student_mlp_1755591256.json",
				"--align-pivots",
				"copilot/experiments/tardis/datasets/pivots_SOLUSDT_aggregate_thr25_ext.parquet",
				"--report",
				"copilot/experiments/tardis/reports/students_mlp_replay_eval_align_pivots_SOLUSDT_agg_thr25.json",
				"--cache",
				"--offline",
				"--cache-dir",
				"copilot/experiments/tardis/cache/jsonl",
				"--cache-chunk-minutes",
				"60",
				"--every",
				"100",
				"--threshold-sweep",
				"0.5"
			]
		},
		{
			"label": "Replay Eval MLP align-pivots (same pivots) v2",
			"type": "shell",
			"command": "${workspaceFolder}/venv/bin/python",
			"args": [
				"-m",
				"copilot.tools.students_replay_eval",
				"--exchange",
				"binance-futures",
				"--symbol",
				"SOLUSDT",
				"--from",
				"2025-08-17T19:00:00Z",
				"--to",
				"2025-08-17T22:50:54Z",
				"--model",
				"copilot/experiments/tardis/models/student_mlp_1755591256.json",
				"--align-pivots",
				"copilot/experiments/tardis/datasets/pivots_SOLUSDT_aggregate_thr25_ext.parquet",
				"--report",
				"copilot/experiments/tardis/reports/students_mlp_replay_eval_align_pivots_SOLUSDT_agg_thr25_v2.json",
				"--cache",
				"--offline",
				"--cache-dir",
				"copilot/experiments/tardis/cache/jsonl",
				"--cache-chunk-minutes",
				"60",
				"--threshold-sweep",
				"0.5",
				"--debug-pivots",
				"10",
				"--debug-out",
				"copilot/experiments/tardis/reports/students_mlp_align_pivots_debug.json",
				"--perf-log",
				"copilot/experiments/tardis/reports/students_mlp_align_pivots_perf.json"
			]
		},
		{
			"label": "Replay Eval MLP align-pivots (same pivots) v3",
			"type": "shell",
			"command": "${workspaceFolder}/venv/bin/python",
			"args": [
				"-m",
				"copilot.tools.students_replay_eval",
				"--exchange",
				"binance-futures",
				"--symbol",
				"SOLUSDT",
				"--from",
				"2025-08-17T19:00:00Z",
				"--to",
				"2025-08-17T22:50:54Z",
				"--model",
				"copilot/experiments/tardis/models/student_mlp_1755591256.json",
				"--align-pivots",
				"copilot/experiments/tardis/datasets/pivots_SOLUSDT_aggregate_thr25_ext.parquet",
				"--report",
				"copilot/experiments/tardis/reports/students_mlp_align_pivots_SOLUSDT_agg_thr25.json",
				"--cache",
				"--offline",
				"--cache-dir",
				"copilot/experiments/tardis/cache/jsonl",
				"--cache-chunk-minutes",
				"60",
				"--threshold-sweep",
				"0.5",
				"--perf-log",
				"copilot/experiments/tardis/reports/students_mlp_align_pivots_perf.json"
			]
		},
		{
			"label": "Students Live Verify 60s (background)",
			"type": "shell",
			"command": "${workspaceFolder}/venv/bin/python",
			"args": [
				"-m",
				"copilot.tools.students_live_verify",
				"--model",
				"copilot/experiments/tardis/models/student_mlp_1755591256.json",
				"--symbol",
				"SOLUSDT",
				"--state-file",
				"copilot/state/runtime_state.json",
				"--horizon-sec",
				"60",
				"--thr",
				"0.5",
				"--commission-bps",
				"0.5",
				"--slippage-bps",
				"0.2",
				"--interval",
				"0.5",
				"--report-every",
				"5",
				"--max-decisions",
				"20"
			],
			"isBackground": true,
			"group": "build"
		},
		{
			"label": "Students Live Verify 60s (20 matured)",
			"type": "shell",
			"command": "${workspaceFolder}/venv/bin/python",
			"args": [
				"-m",
				"copilot.tools.students_live_verify",
				"--model",
				"copilot/experiments/tardis/models/student_mlp_1755591256.json",
				"--symbol",
				"SOLUSDT",
				"--state-file",
				"copilot/state/runtime_state.json",
				"--horizon-sec",
				"60",
				"--thr",
				"0.5",
				"--commission-bps",
				"0.5",
				"--slippage-bps",
				"0.2",
				"--interval",
				"0.5",
				"--report-every",
				"5",
				"--max-decisions",
				"20"
			],
			"isBackground": true
		},
		{
			"label": "Students Live Verify (GRU, SOL, 60s, 20)",
			"type": "shell",
			"command": "${workspaceFolder}/venv/bin/python",
			"args": [
				"-m",
				"copilot.tools.students_live_verify",
				"--model",
				"copilot/experiments/tardis/models/student_seq_gru_1758009741.json",
				"--symbol",
				"SOLUSDT",
				"--state-file",
				"copilot/state/runtime_state.json",
				"--horizon-sec",
				"60",
				"--thr",
				"0.5",
				"--commission-bps",
				"0.5",
				"--slippage-bps",
				"0.2",
				"--interval",
				"0.5",
				"--report-every",
				"5",
				"--max-decisions",
				"20"
			],
			"isBackground": false,
			"problemMatcher": [
				"$python"
			]
		},
		{
			"label": "Run Copilot MCP (SOLUSDT, background)",
			"type": "shell",
			"command": "${workspaceFolder}/venv/bin/python",
			"args": [
				"-m",
				"copilot.main",
				"--symbol",
				"SOLUSDT",
				"--enable-mcp",
				"--min-labeled",
				"30"
			],
			"isBackground": true,
			"group": "build"
		},
		{
			"label": "Students Live Verify (GRU, SOLUSDT, 60s, 20)",
			"type": "shell",
			"command": "${workspaceFolder}/venv/bin/python",
			"args": [
				"-m",
				"copilot.tools.students_live_verify",
				"--model",
				"copilot/experiments/tardis/models/student_seq_gru_1758009741.json",
				"--symbol",
				"SOLUSDT",
				"--state-file",
				"copilot/state/runtime_state.json",
				"--horizon-sec",
				"60",
				"--thr",
				"0.5",
				"--commission-bps",
				"0.5",
				"--slippage-bps",
				"0.2",
				"--interval",
				"0.5",
				"--report-every",
				"5",
				"--max-decisions",
				"20"
			]
		},
		{
			"label": "Students Live Verify (GRU, SOLUSDT)",
			"type": "shell",
			"command": "sh",
			"args": [
				"-c",
				"COPILOT_STATE_FILE=copilot/state/runtime_SOLUSDT.json ${workspaceFolder}/venv/bin/python -m copilot.tools.students_live_verify --model copilot/experiments/tardis/models/student_seq_gru_1758009741.json --symbol SOLUSDT --state-file copilot/state/runtime_SOLUSDT.json --horizon-sec 60 --commission-bps 0.5 --slippage-bps 0.2 --interval 0.5 --report-every 1 --heartbeat-sec 10 --max-decisions 0 --auto-report copilot/experiments/tardis/reports/students_seq_replay_eval_L128_limit300_v2_calibrated.json"
			],
			"isBackground": false,
			"problemMatcher": [
				"$eslint-stylish"
			]
		},
		{
			"label": "Students Live Verify (MLP, SOLUSDT)",
			"type": "shell",
			"command": "sh",
			"args": [
				"-c",
				"COPILOT_STATE_FILE=copilot/state/runtime_SOLUSDT.json ${workspaceFolder}/venv/bin/python -m copilot.tools.students_live_verify --model copilot/experiments/tardis/models/student_mlp_1755591256.json --symbol SOLUSDT --state-file copilot/state/runtime_SOLUSDT.json --horizon-sec 60 --commission-bps 0.5 --slippage-bps 0.2 --interval 0.5 --report-every 1 --heartbeat-sec 10 --max-decisions 0 --auto-report copilot/experiments/tardis/reports/students_mlp_replay_eval_align_pivots_SOLUSDT_agg_thr25_v2.json"
			],
			"isBackground": false,
			"problemMatcher": [
				"$eslint-stylish"
			]
		},
		{
			"label": "Ablation 45m, cost-cover bps",
			"type": "shell",
			"command": "${workspaceFolder}/venv/bin/python",
			"args": [
				"-m",
				"copilot.tools.students_seq_ablation",
				"--symbol",
				"SOLUSDT",
				"--from",
				"$(date -u -v-45M +%Y-%m-%dT%H:%M:%SZ)",
				"--to",
				"$(date -u +%Y-%m-%dT%H:%M:%SZ)",
				"--horizon",
				"5",
				"--L",
				"64",
				"--step",
				"5",
				"--thr",
				"0.0",
				"--pg-include-topn",
				"--balance",
				"pivot-balanced",
				"--pivot-thr-bps",
				"20.0",
				"--groups",
				"base,base+spreadstd,base+trades,base+micro,all-rich",
				"--epochs",
				"3",
				"--batch",
				"64",
				"--hidden",
				"16",
				"--lr",
				"1e-3",
				"--report",
				"copilot/experiments/tardis/reports/students_seq_ablation_45m_costbps.json"
			],
			"isBackground": false
		},
		{
			"label": "LGBM Tick-Replay 48h (soft gates, background)",
			"type": "shell",
			"command": "/Users/dmitrijnazarov/Projects/ai_orederbook_trading_binance/venv/bin/python",
			"args": [
				"-m",
				"copilot.experiments.mm_regimes.backtest_tick_replay",
				"--exchange",
				"binance-futures",
				"--symbol",
				"SOLUSDT",
				"--from",
				"2025-09-28T16:00:00Z",
				"--to",
				"2025-09-30T16:00:00Z",
				"--horizon-sec",
				"60",
				"--tick-source",
				"postgres",
				"--use-real-costs",
				"--cost-mode",
				"taker_mid",
				"--max-spread-bps",
				"5.0",
				"--min-mpskew-bps",
				"0.2",
				"--max-spread-eps-bps",
				"2.0",
				"--zero-spread-only",
				"false",
				"--tp-mode",
				"cap-dyn",
				"--tp-bps",
				"25",
				"--tp-scale",
				"1.0",
				"--tp-k-spread",
				"1.0",
				"--tp-comm-mult",
				"1.0",
				"--progress-every",
				"20",
				"--report",
				"copilot/experiments/mm_regimes/reports/tick_replay_SOLUSDT_48h_20251001_softgates.json"
			],
			"isBackground": true
		},
		{
			"label": "LGBM Tick-Replay 48h (soft gates, pg-progress, background)",
			"type": "shell",
			"command": "sh",
			"args": [
				"-c",
				"export PG_PROGRESS=1 PG_PROGRESS_PRINT_EVERY_SEC=15 PG_FETCH_FRAME_CHUNK_HOURS=6; /Users/dmitrijnazarov/Projects/ai_orederbook_trading_binance/venv/bin/python -m copilot.experiments.mm_regimes.backtest_tick_replay --exchange binance-futures --symbol SOLUSDT --from 2025-09-28T16:00:00Z --to 2025-09-30T16:00:00Z --horizon-sec 60 --tick-source postgres --use-real-costs --cost-mode taker_mid --max-spread-bps 5.0 --min-mpskew-bps 0.2 --max-spread-eps-bps 2.0 --tp-mode cap-dyn --tp-bps 25 --tp-scale 1.0 --tp-k-spread 1.0 --tp-comm-mult 1.0 --progress-every 20 --report copilot/experiments/mm_regimes/reports/tick_replay_SOLUSDT_48h_20251001_softgates.json"
			],
			"isBackground": true
		},
		{
			"label": "LGBM Tick-Replay 48h (soft labels+gates, pg-progress, background)",
			"type": "shell",
			"command": "sh",
			"args": [
				"-c",
				"export PG_PROGRESS=1 PG_PROGRESS_PRINT_EVERY_SEC=15 PG_FETCH_FRAME_CHUNK_HOURS=6 SWEEP_PROGRESS_PRINT_EVERY_SEC=20; /Users/dmitrijnazarov/Projects/ai_orederbook_trading_binance/venv/bin/python -m copilot.experiments.mm_regimes.backtest_tick_replay --exchange binance-futures --symbol SOLUSDT --from 2025-09-28T16:00:00Z --to 2025-09-30T16:00:00Z --horizon-sec 60 --tick-source postgres --use-real-costs --cost-mode taker_mid --include-topn --agg-window-sec 30 --thr-walls 1200 --thr-stall 2.0 --max-spread-bps 5.0 --min-mpskew-bps 0.2 --max-spread-eps-bps 2.0 --tp-mode cap-dyn --tp-bps 25 --tp-scale 1.0 --tp-k-spread 1.0 --tp-comm-mult 1.0 --progress-every 20 --report copilot/experiments/mm_regimes/reports/tick_replay_SOLUSDT_48h_20251001_softlabels_softgates.json"
			],
			"isBackground": true
		},
		{
			"label": "A-run: cost_aware 48→24 (PG-only, taker_mid)",
			"type": "shell",
			"command": "python",
			"args": [
				"-m",
				"copilot.experiments.mm_regimes.backtest_cost_aware",
				"--symbol",
				"SOLUSDT",
				"--from",
				"2025-09-28T00:00:00Z",
				"--to",
				"2025-10-01T00:00:00Z",
				"--horizon-sec",
				"60",
				"--include-topn",
				"--db-only",
				"--use-real-costs",
				"--cost-mode",
				"taker_mid",
				"--calib-ratio",
				"0.6667",
				"--thr-start",
				"0.30",
				"--thr-stop",
				"0.90",
				"--thr-step",
				"0.02",
				"--report",
				"copilot/experiments/mm_regimes/reports/cost_aware_SOLUSDT_48to24_$(date -u +%Y%m%d_%H%M%S).json"
			],
			"isBackground": false,
			"group": "build"
		},
		{
			"label": "B-run: rolling 3→1 (PG-only, taker_mid)",
			"type": "shell",
			"command": "python",
			"args": [
				"-m",
				"copilot.experiments.mm_regimes.run_job_with_pg_lock",
				"copilot/experiments/mm_regimes/rolling_3to1_cmds.txt"
			],
			"isBackground": true,
			"group": "build"
		},
		{
			"label": "B-run (PG env) via lock: rolling 3→1",
			"type": "shell",
			"command": "sh",
			"args": [
				"-lc",
				"set -euo pipefail; set -a; source .env.production; set +a; export PGHOST=\"$DB_HOST\" PGPORT=\"${DB_PORT:-5432}\" PGUSER=\"$DB_USER\" PGPASSWORD=\"$DB_PASSWORD\" PGDATABASE=\"$DB_NAME\" PGSSLMODE=\"${DB_SSLMODE:-require}\"; echo \"[ENV] PGHOST=$PGHOST PGPORT=$PGPORT PGUSER=$PGUSER PGDATABASE=$PGDATABASE PGSSLMODE=$PGSSLMODE\"; python -m copilot.experiments.mm_regimes.run_job_with_pg_lock --progress-every 15 -- bash -lc 'set -e; while IFS= read -r line; do [[ -z \"$line\" || \"$line\" =~ ^# ]] && continue; echo \"[B-RUN] $line\"; eval \"$line\"; done < copilot/experiments/mm_regimes/rolling_3to1_cmds.txt'"
			],
			"isBackground": true,
			"group": "build"
		},
		{
			"label": "B-run (resume) with PG lock",
			"type": "shell",
			"command": "sh",
			"args": [
				"-lc",
				"set -euo pipefail; set -a; source .env.production; set +a; export PGHOST=\"$DB_HOST\" PGPORT=\"${DB_PORT:-5432}\" PGUSER=\"$DB_USER\" PGPASSWORD=\"$DB_PASSWORD\" PGDATABASE=\"$DB_NAME\" PGSSLMODE=\"${DB_SSLMODE:-require}\"; export MM_REGIMES_LOCK_SCOPE=SOLUSDT; echo \"[ENV] PGHOST=$PGHOST PGPORT=$PGPORT PGUSER=$PGUSER PGDATABASE=$PGDATABASE PGSSLMODE=$PGSSLMODE\"; python -m copilot.experiments.mm_regimes.run_job_with_pg_lock --progress-every 15 -- bash -lc 'set -e; while IFS= read -r line; do [[ -z \"$line\" || \"$line\" =~ ^# ]] && continue; echo \"[B-RUN] $line\"; eval \"$line\"; done < copilot/experiments/mm_regimes/rolling_3to1_cmds.txt'"
			],
			"isBackground": true,
			"group": "build"
		},
		{
			"label": "B-run (resume2) with PG lock",
			"type": "shell",
			"command": "sh",
			"args": [
				"-lc",
				"set -euo pipefail; set -a; source .env.production; set +a; export PGHOST=\"$DB_HOST\" PGPORT=\"${DB_PORT:-5432}\" PGUSER=\"$DB_USER\" PGPASSWORD=\"$DB_PASSWORD\" PGDATABASE=\"$DB_NAME\" PGSSLMODE=\"${DB_SSLMODE:-require}\"; export MM_REGIMES_LOCK_SCOPE=SOLUSDT; echo \"[ENV] PGHOST=$PGHOST PGPORT=$PGPORT PGUSER=$PGUSER PGDATABASE=$PGDATABASE PGSSLMODE=$PGSSLMODE\"; python -m copilot.experiments.mm_regimes.run_job_with_pg_lock --progress-every 15 -- bash -lc 'set -e; while IFS= read -r line; do [[ -z \"$line\" || \"$line\" =~ ^# ]] && continue; echo \"[B-RUN] $line\"; eval \"$line\"; done < copilot/experiments/mm_regimes/rolling_3to1_cmds.txt'"
			],
			"isBackground": true,
			"group": "build"
		},
		{
			"label": "MM Regimes: Trend day6h grid mpskew relax",
			"type": "shell",
			"command": "sh",
			"args": [
				"-c",
				"set -euo pipefail; \nexport PG_PROGRESS=1 TRAIN_PROGRESS_PRINT_EVERY_SEC=10 SWEEP_PROGRESS_PRINT_EVERY_SEC=5 MM_REGIMES_LOCK_SCOPE=SOLUSDT;\nfor MIN in 30 50; do for AFTER in 10 15 20; do for MPS in 0.5 1.0; do \n  OUT=\"copilot/experiments/mm_regimes/reports/trend_SOLUSDT_20250930_12to18_min${MIN}_after${AFTER}_pm_gate_mpskew$(printf '%02d' \"${MPS/./}\").json\";\n  echo \"[RUN] min_move=${MIN} after=${AFTER} mpskew=${MPS} -> $OUT\";\n  python -m copilot.experiments.mm_regimes.run_job_with_pg_lock --progress-every 15 -- \\\n    python -m copilot.experiments.mm_regimes.backtest_cost_aware \\\n      --symbol SOLUSDT --from 2025-09-30T12:00:00Z --to 2025-09-30T18:00:00Z \\\n      --horizon-sec 60 --include-topn --db-only --use-real-costs --cost-mode taker_mid \\\n      --pivot-window-sec 20 \\\n      --trend-label-mode trend-chase --trend-move-rate-mode per-minute --trend-direction-pivot \\\n      --max-spread-eps-bps 2.0 --min-mpskew-bps ${MPS} \\\n      --trend-after-sec ${AFTER} --trend-min-move-bps ${MIN} \\\n      --report \"$OUT\";\n  sleep 1;\n done; done; done"
			],
			"isBackground": false,
			"group": "build"
		},
		{
			"label": "MM Regimes: Trend day6h grid mpskew relax (env)",
			"type": "shell",
			"command": "sh",
			"args": [
				"-c",
				"set -euo pipefail; \nset -a; source .env.production; set +a;\nexport PGHOST=\"$DB_HOST\" PGPORT=\"${DB_PORT:-5432}\" PGUSER=\"$DB_USER\" PGPASSWORD=\"$DB_PASSWORD\" PGDATABASE=\"$DB_NAME\" PGSSLMODE=\"${DB_SSLMODE:-require}\";\necho \"[ENV] PGHOST=$PGHOST PGPORT=$PGPORT PGUSER=$PGUSER PGDATABASE=$PGDATABASE PGSSLMODE=$PGSSLMODE\";\nexport PG_PROGRESS=1 TRAIN_PROGRESS_PRINT_EVERY_SEC=10 SWEEP_PROGRESS_PRINT_EVERY_SEC=5 MM_REGIMES_LOCK_SCOPE=SOLUSDT;\nfor MIN in 30 50; do for AFTER in 10 15 20; do for MPS in 0.5 1.0; do \n  OUT=\"copilot/experiments/mm_regimes/reports/trend_SOLUSDT_20250930_12to18_min${MIN}_after${AFTER}_pm_gate_mpskew$(printf '%02d' \"${MPS/./}\").json\";\n  echo \"[RUN] min_move=${MIN} after=${AFTER} mpskew=${MPS} -> $OUT\";\n  python -m copilot.experiments.mm_regimes.run_job_with_pg_lock --progress-every 15 -- \\\n    python -m copilot.experiments.mm_regimes.backtest_cost_aware \\\n      --symbol SOLUSDT --from 2025-09-30T12:00:00Z --to 2025-09-30T18:00:00Z \\\n      --horizon-sec 60 --include-topn --db-only --use-real-costs --cost-mode taker_mid \\\n      --pivot-window-sec 20 \\\n      --trend-label-mode trend-chase --trend-move-rate-mode per-minute --trend-direction-pivot \\\n      --max-spread-eps-bps 2.0 --min-mpskew-bps ${MPS} \\\n      --trend-after-sec ${AFTER} --trend-min-move-bps ${MIN} \\\n      --report \"$OUT\";\n  sleep 1;\n done; done; done"
			],
			"isBackground": false,
			"group": "build"
		}
	]
}