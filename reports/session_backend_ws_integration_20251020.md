# Session Report ‚Äî Backend WS Integration Complete

**–î–∞—Ç–∞:** 20 –æ–∫—Ç—è–±—Ä—è 2025  
**–í—Ä–µ–º—è:** ~23:30  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ Backend MVP –≥–æ—Ç–æ–≤ ‚Äî —Ç—Ä–µ–±—É–µ—Ç live-–ø—Ä–æ–≤–µ—Ä–∫–∏

---

## üéØ –í—ã–ø–æ–ª–Ω–µ–Ω–æ –≤ —ç—Ç–æ–π —Å–µ—Å—Å–∏–∏

### 1. ‚úÖ Backend MVP (FastAPI + WebSocket)

**–°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- `backend/__init__.py` ‚Äî –ø–∞–∫–µ—Ç –¥–ª—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã—Ö –∏–º–ø–æ—Ä—Ç–æ–≤
- `backend/requirements.txt` ‚Äî –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (FastAPI, uvicorn, websockets, anyio, python-dotenv)
- `backend/binance_client.py` ‚Äî –∫–ª–∏–µ–Ω—Ç –∫ Binance Futures bookTicker —Å –∞–≤—Ç–æ–ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º
- `backend/main.py` ‚Äî FastAPI —Å–µ—Ä–≤–µ—Ä —Å WS `/ws` –∏ —Ñ–æ–Ω–æ–≤—ã–º–∏ –∑–∞–¥–∞—á–∞–º–∏
- `backend/README.md` ‚Äî –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∑–∞–ø—É—Å–∫–∞

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- WebSocket endpoint: `ws://localhost:8000/ws`
- –¢—Ä–∞–Ω—Å–ª—è—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π:
  - `price_update { type, symbol, price, ts }` ‚Äî real-time —Ü–µ–Ω—ã –∏–∑ Binance
  - `heartbeat { type, ts }` ‚Äî –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
- –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏:
  - `binance_pump('SOLUSDT')` ‚Äî –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π —Å—Ç—Ä–∏–º bookTicker
  - `heartbeat_pump()` ‚Äî –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–π heartbeat
- –§–∏–∫—Å–∞—Ü–∏—è –∑–∞–¥–∞—á –≤ `_background_tasks` set –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —Å–±–æ—Ä–∫–∏ GC

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫:**
```bash
# –°–æ–∑–¥–∞—Ç—å venv –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
python3 -m venv venv
source venv/bin/activate
pip install -r backend/requirements.txt

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
uvicorn backend.main:app --reload --host 0.0.0.0 --port 8000
```

---

### 2. ‚úÖ Frontend WebSocket Integration

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- `frontend/.env.local` ‚Äî —Å–æ–∑–¥–∞–Ω —Å `VITE_WS_URL=ws://localhost:8000/ws`
- `frontend/src/App.tsx`:
  - –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω `useWebSocket`
  - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ WS —á–µ—Ä–µ–∑ `VITE_WS_URL`
  - –°–∏–º—É–ª—è—Ü–∏—è —Ü–µ–Ω –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è –ø—Ä–∏ `connected === true`
  - –î–æ–±–∞–≤–ª–µ–Ω `ChartErrorBoundary` –≤–æ–∫—Ä—É–≥ `EquityChart`
- `frontend/src/hooks/useWebSocket.ts`:
  - –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏–º–≤–æ–ª–æ–≤: `SOLUSDT` ‚Üí `SOL` –ø–µ—Ä–µ–¥ `updatePrice`
  - –î–∏—Å–ø–µ—Ç—á–µ—Ä–∏–∑–∞—Ü–∏—è `price_update`, `position_update`, `trade_executed`, `equity_snapshot`, `heartbeat`

**–ù–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- `frontend/src/components/ChartErrorBoundary.tsx` ‚Äî React Error Boundary –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ –æ—à–∏–±–æ–∫ –≥—Ä–∞—Ñ–∏–∫–∞

---

### 3. ‚úÖ EquityChart Fix (lightweight-charts v5)

**–ü—Ä–æ–±–ª–µ–º–∞:**
- lightweight-charts v5.0.9 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç API `chart.addSeries('Line', options)`
- –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ –ø—ã—Ç–∞–ª–∏—Å—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `addLineSeries` (—É–¥–∞–ª–µ–Ω–æ –≤ v5) –∏–ª–∏ –æ–±—ä–µ–∫—Ç–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
const series = chart.addSeries('Line', {
  color: '#10b981',
  lineWidth: 2,
  priceLineVisible: true,
  lastValueVisible: true,
  priceLineStyle: LineStyle.Dashed,
})
```

**–£–ª—É—á—à–µ–Ω–∏—è:**
- Try-catch –≤–æ–∫—Ä—É–≥ `setData` –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–∞–¥–µ–Ω–∏–π
- –ü—Ä–æ–≤–µ—Ä–∫–∞ `seriesRef.current` –∏ `chartRef.current` –ø–µ—Ä–µ–¥ –∞–ø–¥–µ–π—Ç–∞–º–∏
- `ChartErrorBoundary` –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç fallback UI

---

## üìä –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

### ‚úÖ –ì–æ—Ç–æ–≤–æ
- Backend FastAPI —Å–µ—Ä–≤–µ—Ä —Å WS (–ø–æ—Ä—Ç 8000)
- Binance Futures bookTicker integration (SOLUSDT)
- Frontend WebSocket –∫–ª–∏–µ–Ω—Ç —Å –∞–≤—Ç–æ–ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º
- –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏–º–≤–æ–ª–æ–≤ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- Error boundary –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–∞
- –ú–æ–¥—É–ª—å–Ω—ã–µ docstrings –≤ backend (—Å–æ–≥–ª–∞—Å–Ω–æ –ø–æ–ª–∏—Ç–∏–∫–µ)

### ‚è≥ –¢—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏
- **Live —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ:** Backend –∑–∞–ø—É—â–µ–Ω, frontend dev-—Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ 5173
- **–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
  - –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä `Live` (–∑–µ–ª—ë–Ω—ã–π) –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É
  - –¶–µ–Ω—ã SOL –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤ TickerBar
  - –ì—Ä–∞—Ñ–∏–∫ equity —Ä–∏—Å—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
  - –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞

### ‚è≥ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (–∏–∑–≤–µ—Å—Ç–Ω—ã–µ)
- Backend —Ç—Ä–∞–Ω—Å–ª–∏—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ `price_update` –∏ `heartbeat`
- –ü–æ–∑–∏—Ü–∏–∏ –∏ —Å–¥–µ–ª–∫–∏ –ø–æ–∫–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–µ (mock)
- –ù–µ—Ç `equity_snapshot` –æ—Ç backend (equity —Å—á–∏—Ç–∞–µ—Ç—Å—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ)

---

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞ 1: WebSocket immediately closes
**–ü—Ä–∏—á–∏–Ω–∞:** Endpoint –∂–¥–∞–ª –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (`receive_text()`), –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏–ª–∏  
**–†–µ—à–µ–Ω–∏–µ:** –ó–∞–º–µ–Ω–µ–Ω–æ –Ω–∞ `await asyncio.sleep(30)` –¥–ª—è —É–¥–µ—Ä–∂–∞–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞ 2: lightweight-charts API error
**–ü—Ä–∏—á–∏–Ω–∞:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –¥–ª—è v5  
**–†–µ—à–µ–Ω–∏–µ:** –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ `chart.addSeries('Line', {...})`

### –ü—Ä–æ–±–ª–µ–º–∞ 3: Background tasks garbage collected
**–ü—Ä–∏—á–∏–Ω–∞:** `asyncio.create_task()` –±–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—Å—ã–ª–∫–∏ ‚Üí GC —É–¥–∞–ª—è–µ—Ç –∑–∞–¥–∞—á—É  
**–†–µ—à–µ–Ω–∏–µ:** `_background_tasks` set —Å `add_done_callback` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞ 4: Symbol mismatch
**–ü—Ä–∏—á–∏–Ω–∞:** Binance –æ—Ç–¥–∞—ë—Ç 'SOLUSDT', –∫–ª–∏–µ–Ω—Ç –æ–∂–∏–¥–∞–µ—Ç 'SOL'  
**–†–µ—à–µ–Ω–∏–µ:** –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –≤ `useWebSocket`: `symbol.slice(0, -4)` –µ—Å–ª–∏ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ 'USDT'

---

## üìù –§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–Ω–æ–≤—ã–µ/–∏–∑–º–µ–Ω—ë–Ω–Ω—ã–µ)

```
Binance_Dashboard/
‚îú‚îÄ‚îÄ backend/                          # ‚úÖ NEW
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py                  # ‚úÖ NEW
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt             # ‚úÖ NEW
‚îÇ   ‚îú‚îÄ‚îÄ binance_client.py            # ‚úÖ NEW (docstring ‚úÖ)
‚îÇ   ‚îú‚îÄ‚îÄ main.py                      # ‚úÖ NEW (docstring ‚úÖ)
‚îÇ   ‚îî‚îÄ‚îÄ README.md                    # ‚úÖ NEW
‚îú‚îÄ‚îÄ frontend/
‚îÇ   ‚îú‚îÄ‚îÄ .env.local                   # ‚úÖ NEW
‚îÇ   ‚îú‚îÄ‚îÄ .env.example                 # ‚úÖ NEW
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ App.tsx                  # ‚úÖ MODIFIED (WS enabled)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ EquityChart.tsx      # ‚úÖ MODIFIED (v5 API fix)
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ChartErrorBoundary.tsx # ‚úÖ NEW
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ hooks/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ useWebSocket.ts      # ‚úÖ MODIFIED (symbol normalization)
‚îî‚îÄ‚îÄ venv/                            # ‚úÖ NEW (Python dependencies)
```

---

## üöÄ –ó–∞–ø—É—Å–∫ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

### –¢–µ—Ä–º–∏–Ω–∞–ª 1 (Backend):
```bash
cd /Users/dmitrijnazarov/Projects/Binance_Dashboard
source venv/bin/activate
uvicorn backend.main:app --reload --host 0.0.0.0 --port 8000
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
INFO: Uvicorn running on http://0.0.0.0:8000
INFO: Application startup complete.
```

### –¢–µ—Ä–º–∏–Ω–∞–ª 2 (Frontend):
```bash
cd /Users/dmitrijnazarov/Projects/Binance_Dashboard/frontend
npm run dev
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
VITE v7.1.11  ready in 133 ms
‚ûú  Local:   http://localhost:5173/
```

### –ë—Ä–∞—É–∑–µ—Ä:
–û—Ç–∫—Ä—ã—Ç—å `http://localhost:5173` –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:
1. –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä **Live** (–∑–µ–ª—ë–Ω—ã–π) –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É
2. –¶–µ–Ω—ã SOL –≤ TickerBar –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏
3. –ì—Ä–∞—Ñ–∏–∫ equity –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
4. –í console.log (F12) ‚Äî —Å–æ–æ–±—â–µ–Ω–∏—è `price_update` –∫–∞–∂–¥—ã–µ ~—Å–µ–∫—É–Ω–¥—ã

---

## üéØ –ê–î–í–û–ö–ê–¢ –ó–ê / –ü–†–û–¢–ò–í

### –ò–¥–µ—è —Ü–µ–ª–∏–∫–æ–º ‚Äî Backend WS Integration

**–ê–¥–≤–æ–∫–∞—Ç –ó–ê:**
- ‚úÖ End-to-end –∫–æ–Ω—Ç—É—Ä: Binance ‚Üí FastAPI WS ‚Üí Frontend Zustand ‚Üí UI
- ‚úÖ Real-time —Ü–µ–Ω—ã –æ—Ç Binance –±–µ–∑ —Å–∏–Ω—Ç–µ—Ç–∏–∫–∏ (live-only policy)
- ‚úÖ Graceful fallback: —Å–∏–º—É–ª—è—Ü–∏—è –ø—Ä–∏ disconnected, live –ø—Ä–∏ connected
- ‚úÖ –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: binance_client –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω, –ª–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å
- ‚úÖ Docstrings –ø–æ –ø–æ–ª–∏—Ç–∏–∫–µ (–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ/–∫–æ–Ω—Ç—Ä–∞–∫—Ç/CLI/–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏)
- ‚úÖ Error boundary –∏–∑–æ–ª–∏—Ä—É–µ—Ç –ø–∞–¥–µ–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–∞ –æ—Ç –æ—Å—Ç–∞–ª—å–Ω–æ–≥–æ UI

**–ê–¥–≤–æ–∫–∞—Ç –ü–†–û–¢–ò–í:**
- ‚ö†Ô∏è Backend WS —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ (–ª–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç immediate close)
- ‚ö†Ô∏è –¢–æ–ª—å–∫–æ price_update; –Ω–µ—Ç position_update/trade_executed/equity_snapshot
- ‚ö†Ô∏è –ù–µ—Ç health-check endpoint –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚ö†Ô∏è Frontend –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç reconnection errors —è–≤–Ω–æ (—Ç–æ–ª—å–∫–æ console.error)

---

### –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ ‚Äî –≠—Ç–∞ —Å–µ—Å—Å–∏—è

**–ê–¥–≤–æ–∫–∞—Ç –ó–ê:**
- ‚úÖ 10 —Ñ–∞–π–ª–æ–≤ —Å–æ–∑–¥–∞–Ω–æ/–∏–∑–º–µ–Ω–µ–Ω–æ –∑–∞ ~2.5 —á–∞—Å–∞
- ‚úÖ Backend scaffolding –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω (FastAPI + Binance)
- ‚úÖ Frontend WS –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤–∫–ª—é—á–µ–Ω–∞ —Å error boundary
- ‚úÖ lightweight-charts v5 API –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –ø–æ—Å–ª–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏—Ç–µ—Ä–∞—Ü–∏–π
- ‚úÖ –í—Å–µ Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã, venv –≥–æ—Ç–æ–≤
- ‚úÖ –û–±–∞ dev-—Å–µ—Ä–≤–µ—Ä–∞ –∑–∞–ø—É—â–µ–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç

**–ê–¥–≤–æ–∫–∞—Ç –ü–†–û–¢–ò–í:**
- ‚ö†Ô∏è **WS —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Ç—Ä–µ–±—É–µ—Ç live-–ø—Ä–æ–≤–µ—Ä–∫–∏** ‚Äî –ª–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Ä–∞–∑—Ä—ã–≤—ã
- ‚ö†Ô∏è –ù–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –æ—Ç–∫—Ä—ã—Ç—å URL)
- ‚ö†Ô∏è Error –≤ –±—Ä–∞—É–∑–µ—Ä–µ –≤—Å—ë –µ—â—ë –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑-–∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ API lightweight-charts
- ‚ö†Ô∏è –ù–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç—ã (–Ω–∏ backend, –Ω–∏ frontend)
- ‚ö†Ô∏è –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (README –∫–æ—Ä–Ω–µ–≤–æ–π) –Ω–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∞ —Å –Ω–æ–≤—ã–º–∏ –∫–æ–º–∞–Ω–¥–∞–º–∏ –∑–∞–ø—É—Å–∫–∞

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

| –ó–∞–¥–∞—á–∞ | –¶–µ–ª–µ–≤–æ–µ –≤—Ä–µ–º—è | –§–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ | –°—Ç–∞—Ç—É—Å |
|--------|---------------|-------------|--------|
| Backend scaffold | 60 –º–∏–Ω | ~40 –º–∏–Ω | ‚úÖ –ë—ã—Å—Ç—Ä–µ–µ |
| Frontend WS integration | 30 –º–∏–Ω | ~20 –º–∏–Ω | ‚úÖ –ë—ã—Å—Ç—Ä–µ–µ |
| EquityChart fix | 15 –º–∏–Ω | ~45 –º–∏–Ω | ‚ö†Ô∏è –ú–µ–¥–ª–µ–Ω–Ω–µ–µ (API v5) |
| Error boundary | 10 –º–∏–Ω | ~10 –º–∏–Ω | ‚úÖ –í —Å—Ä–æ–∫ |
| Testing/verification | 20 –º–∏–Ω | 0 –º–∏–Ω | ‚ùå –ù–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ |
| **–ò–¢–û–ì–û** | **135 –º–∏–Ω** | **~115 –º–∏–Ω** | **‚è≥ –¢—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏** |

---

## ‚è≠Ô∏è –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (Roadmap)

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ (—Å–ª–µ–¥—É—é—â–∏–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç):
1. **Live verification:**
   - –û—Ç–∫—Ä—ã—Ç—å `http://localhost:5173` –≤ –±—Ä–∞—É–∑–µ—Ä–µ
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å WS —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω
   - –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å —Å–∫—Ä–∏–Ω—à–æ—Ç/–≤–∏–¥–µ–æ —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ UI

2. **Backend stability:**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ uvicorn –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ WS
   - –î–æ–±–∞–≤–∏—Ç—å reconnection handling –≤ binance_client
   - –î–æ–±–∞–≤–∏—Ç—å `/health` endpoint –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–æ (1-2 –¥–Ω—è):
3. **Position & Trade simulation:**
   - Backend: –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å mock `position_update` –∏ `trade_executed`
   - Frontend: –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ç–∞–±–ª–∏—Ü—ã –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è

4. **Equity –æ—Ç backend:**
   - Backend: —Å—á–∏—Ç–∞—Ç—å equity = balance + Œ£(unrealizedPnl) –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å `equity_snapshot`
   - Frontend: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤–º–µ—Å—Ç–æ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ —Ä–∞—Å—á—ë—Ç–∞

5. **Root-level dev script:**
   - –î–æ–±–∞–≤–∏—Ç—å `package.json` –≤ –∫–æ—Ä–µ–Ω—å —Å `npm run dev` ‚Üí –∑–∞–ø—É—Å–∫ frontend + backend
   - –ò–ª–∏ Docker Compose –¥–ª—è –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã —Å—Ç–∞—Ä—Ç–∞

### –°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω–æ (1 –Ω–µ–¥–µ–ª—è):
6. **Tests:**
   - Backend: pytest –¥–ª—è WS endpoint –∏ binance_client
   - Frontend: vitest –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ useWebSocket hook

7. **Production deploy:**
   - Railway/Render –¥–ª—è backend
   - Vercel/Netlify –¥–ª—è frontend
   - ENV variables —á–µ—Ä–µ–∑ .env.production

---

## üîó –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã (–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å)

```bash
# Backend start
cd /Users/dmitrijnazarov/Projects/Binance_Dashboard
source venv/bin/activate
uvicorn backend.main:app --reload --host 0.0.0.0 --port 8000

# Frontend start (–≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
cd /Users/dmitrijnazarov/Projects/Binance_Dashboard/frontend
npm run dev

# –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ
open http://localhost:5173
```

---

## üìÑ Quality Gates

| Gate | –°—Ç–∞—Ç—É—Å | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|------|--------|-----------|
| Build (Backend) | N/A | Python –Ω–µ —Ç—Ä–µ–±—É–µ—Ç —Å–±–æ—Ä–∫–∏ |
| Build (Frontend) | ‚è≥ –ù–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ | `npm run build` –Ω–µ –∑–∞–ø—É—Å–∫–∞–ª–∏ |
| Lint (Backend) | ‚ö†Ô∏è Import warnings | FastAPI/uvicorn –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤ editor env |
| Lint (Frontend) | ‚úÖ PASS | TS errors resolved |
| Tests | ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç | Unit/integration tests ‚Äî TODO |
| Live verification | ‚è≥ –¢—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –æ—Ç–∫—Ä—ã—Ç—å –±—Ä–∞—É–∑–µ—Ä |

---

## üí° –í—ã–≤–æ–¥

**–°—Ç–∞—Ç—É—Å:** Backend MVP –∏ frontend WS –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω—ã —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏. –¢—Ä–µ–±—É–µ—Ç—Å—è live-–ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∏ –≥—Ä–∞—Ñ–∏–∫–∞.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –æ–±–∞ dev-—Å–µ—Ä–≤–µ—Ä–∞ (–∫–æ–º–∞–Ω–¥—ã –≤—ã—à–µ)
2. –û—Ç–∫—Ä—ã—Ç—å `http://localhost:5173`
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä Live –∏ –∞–ø–¥–µ–π—Ç—ã —Ü–µ–Ω SOL
4. –ï—Å–ª–∏ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Äî –∫–æ–º–º–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏ –ø–µ—Ä–µ—Ö–æ–¥ –∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é backend (–ø–æ–∑–∏—Ü–∏–∏/—Å–¥–µ–ª–∫–∏)
5. –ï—Å–ª–∏ WS —Ä–≤—ë—Ç—Å—è ‚Äî –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏ –∏ –¥–æ–±–∞–≤–∏—Ç—å —è–≤–Ω—ã–π reconnection delay

**Next Action –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
–û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ `http://localhost:5173`. –ï—Å–ª–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä `Live` –∑–µ–ª—ë–Ω—ã–π –∏ —Ü–µ–Ω—ã SOL –º–µ–Ω—è—é—Ç—Å—è ‚Äî —É—Å–ø–µ—Ö! –ï—Å–ª–∏ –Ω–µ—Ç ‚Äî –ø—Ä–∏—à–ª–∏—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç console.log (F12) –∏ –ª–æ–≥–∏ uvicorn –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏.

---

**Estimated time to full Phase 2 completion:** 4-6 —á–∞—Å–æ–≤ (–ø–æ–∑–∏—Ü–∏–∏ + —Å–¥–µ–ª–∫–∏ + equity –æ—Ç backend + —Ç–µ—Å—Ç—ã)

